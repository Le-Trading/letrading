{% extends 'base.html.twig' %}

{% block title %}Notifications{% endblock %}

{% block body %}
    <div class="container">
        <h3 class="text-center">Vos notifications</h3>
        <hr>
        {% for notif in notifs %}
            <div class="list-group">
                <a href="{{ path('thread_show', {'slug':notif.post.Thread.slug}) }}#post{{ notif.post.id }}" class="list-group-item text-decoration-none flex-column align-items-start text-no-color">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1 text-capitalize">
                            {% if notif.sender.media %}
                                <img class="avatar-medium rounded-circle"
                                     src="{{ vich_uploader_asset(notif.sender.media, 'imageFile', 'App\\Entity\\Media') }}"
                                     alt="Avatar de {{ notif.sender.fullName }}">
                            {% else %}
                                <img class="avatar-medium rounded-circle"
                                     src="{{ asset('images/image-user.png') }}"
                                     alt="Avatar de {{ notif.sender.fullName }}">
                            {% endif %}
                            {{ notif.sender.fullName }}
                        </h5>
                        <small>{{ notif.date|date("d/m/Y") }}</small>
                    </div>
                    <p class="m-1">
                        {% if notif.type == "comment" %}
                            <i class="fa fa-comment"></i>
                        {% elseif notif.type == "like" %}
                            <i class="fa fa-heart"></i>
                        {% elseif notif.type == "admin" %}
                            <i class="fas fa-users"></i>
                        {% endif %}

                        {% if notif.type=="admin" %}
                            <strong>Le Trading à posté un nouveau message</strong>
                        {% else %}
                            <span class="text-capitalize font-weight-bold">{{ notif.sender.pseudo }}<span/> a
                            {% if notif.type=="comment" %}
                                répondu à
                            {% elseif notif.type=="like" %}
                                liké
                            {% endif %}
                            votre post
                        {% endif %}
                    </p>
                </a>
            </div>
        {% endfor %}
        <div class="pagination justify-content-center m-3">
            {{ knp_pagination_render(notifs) }}
        </div>
    </div>
{% endblock %}
